### 문제 정의 및 설계 목표

**문제 정의**:
- A고객사는 자사 직접 판매 상품뿐만 아니라 여러 입점 업체의 상품을 함께 판매하고자 합니다.
- 상품 주문 관련 서비스는 비즈니스 유연성(쉽게 확장, 수정 가능)과 높은 성능을 제공해야 합니다.

**설계 목표**:
1. **유연성**: 다양한 상품 유형과 입점 업체 추가 시에도 쉽게 시스템을 확장할 수 있어야 합니다.
2. **성능**: 대규모 주문 처리 시 성능 저하 없이 빠르게 대응할 수 있어야 합니다.
3. **확장성**: 새로운 입점 업체와 상품이 추가되어도 구조적으로 문제가 없고, 코드 수정 없이도 시스템이 자동으로 반영할 수 있어야 합니다.

### 데이터 모델 설계

1. **엔티티 정의**:
    - **Product (상품)**
    - **Vendor (입점 업체)**
    - **Order (주문)**
    - **OrderItem (주문 항목)**
    - **Inventory (재고)**
    - **Category (상품 카테고리)**

2. **엔티티 간 관계**:
    - **Product**는 여러 **Category**에 속할 수 있음 (N:M 관계).
    - **Product**는 하나의 **Vendor**(입점 업체)와 연관됨.
    - **Order**는 여러 **OrderItem**을 포함하며, **OrderItem**은 각각 하나의 **Product**를 참조.
    - **Inventory**는 **Product**와 연관되어 있으며, 재고 관리를 담당함.

### 데이터베이스 스키마 설계

```sql
CREATE TABLE Vendor (
    VendorID INT PRIMARY KEY,
    VendorName VARCHAR(255) NOT NULL,
    VendorType ENUM('DIRECT', 'THIRD_PARTY') NOT NULL,
    ContactInfo VARCHAR(255)
);

CREATE TABLE Category (
    CategoryID INT PRIMARY KEY,
    CategoryName VARCHAR(255) NOT NULL
);

CREATE TABLE Product (
    ProductID INT PRIMARY KEY,
    ProductName VARCHAR(255) NOT NULL,
    VendorID INT,
    Price DECIMAL(10, 2) NOT NULL,
    Description TEXT,
    FOREIGN KEY (VendorID) REFERENCES Vendor(VendorID)
);

CREATE TABLE ProductCategory (
    ProductID INT,
    CategoryID INT,
    PRIMARY KEY (ProductID, CategoryID),
    FOREIGN KEY (ProductID) REFERENCES Product(ProductID),
    FOREIGN KEY (CategoryID) REFERENCES Category(CategoryID)
);

CREATE TABLE Order (
    OrderID INT PRIMARY KEY,
    CustomerID INT,
    OrderDate DATETIME NOT NULL,
    TotalAmount DECIMAL(10, 2) NOT NULL,
    OrderStatus ENUM('PENDING', 'PROCESSING', 'COMPLETED', 'CANCELLED') NOT NULL
);

CREATE TABLE OrderItem (
    OrderItemID INT PRIMARY KEY,
    OrderID INT,
    ProductID INT,
    Quantity INT NOT NULL,
    Price DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (OrderID) REFERENCES Order(OrderID),
    FOREIGN KEY (ProductID) REFERENCES Product(ProductID)
);

CREATE TABLE Inventory (
    ProductID INT PRIMARY KEY,
    StockQuantity INT NOT NULL,
    LastUpdated DATETIME NOT NULL,
    FOREIGN KEY (ProductID) REFERENCES Product(ProductID)
);
```

### 설계 사유

1. **유연성**:
   - **Vendor** 엔티티에 `VendorType` 필드를 추가하여 자사 제품과 입점 업체의 제품을 구분할 수 있도록 설계했습니다. 새로운 입점 업체 추가 시 **Vendor** 테이블에만 데이터를 추가하면 되므로 시스템이 쉽게 확장됩니다.
   - **ProductCategory** 테이블을 통해 **Product**와 **Category** 간의 N:M 관계를 표현하여, 상품이 여러 카테고리에 속할 수 있게 설계했습니다. 이는 상품 분류 및 탐색의 유연성을 제공합니다.

2. **성능**:
   - **OrderItem** 엔티티를 별도로 두어 주문 내역을 관리하도록 했습니다. 이를 통해 하나의 주문이 여러 상품을 포함할 수 있으며, 각 주문 항목이 개별적으로 관리되므로 대규모 주문 처리 시 성능을 최적화할 수 있습니다.
   - **Inventory** 테이블을 독립적으로 구성하여, 상품의 재고 관리가 효율적으로 이루어지도록 설계했습니다. 이는 재고 업데이트 시 주문 시스템의 성능 저하를 방지합니다.

3. **확장성**:
   - 새롭게 입점하는 업체나 상품 유형이 추가되더라도, 기존 구조에 큰 변동 없이 데이터만 추가하여 확장할 수 있도록 설계되었습니다.
   - 다양한 상태(예: 주문 상태)와 유형(예: VendorType)이 **ENUM** 필드로 관리되므로, 코드 수정 없이도 추가적인 유형을 쉽게 반영할 수 있습니다.

### 비즈니스 시나리오 예시

1. **자사 제품 주문**:
   - 고객이 자사 제품을 주문하면 **Order**와 **OrderItem**이 생성되고, **Inventory**에서 재고가 차감됩니다.
   - **VendorType**이 'DIRECT'인 경우, 자사 물류 시스템과 연동해 바로 처리됩니다.

2. **입점 업체 제품 주문**:
   - 입점 업체의 제품을 주문하면 동일한 **Order**와 **OrderItem** 구조가 사용되지만, **VendorType**이 'THIRD_PARTY'인 경우 입점 업체와의 API 연동 또는 수동 처리 절차를 통해 주문이 처리됩니다.
   - 각 입점 업체의 재고 관리와 가격 정책은 **VendorID**를 통해 구분하여 처리할 수 있습니다.

### 결론

이 설계는 A고객사의 비즈니스 유연성과 성능을 고려한 데이터 모델로, 자사와 입점 업체의 다양한 상품을 통합적으로 관리할 수 있도록 유연하고 확장 가능한 구조를 제공합니다. 특히, 각 서비스가 독립적으로 확장 가능하도록 설계하여 비즈니스 요구 사항에 맞게 유연하게 대응할 수 있습니다.
