트랜잭션의 종류 중 "보상 가능 트랜잭션", "피봇 트랜잭션", 그리고 "재시도 가능 트랜잭션"에 대해 설명드리겠습니다. 이들은 트랜잭션이 실패했을 때 시스템이 어떻게 복구할 수 있는지와 관련이 있으며, 분산 시스템이나 마이크로서비스 아키텍처에서 자주 언급됩니다.

### 1. **보상 가능 트랜잭션 (Compensatable Transaction)**
- **설명**: 보상 가능 트랜잭션은 **이미 수행된 작업을 취소하거나 되돌릴 수 있는 트랜잭션**입니다. 트랜잭션이 실패하거나 롤백이 필요할 때, 취소 작업(보상 작업)을 통해 시스템 상태를 원래 상태로 되돌릴 수 있습니다.
  
- **사용 시나리오**: 예를 들어, 항공권 예약 시스템에서 좌석을 예약한 후 결제 실패 시, 좌석 예약을 취소하는 보상 작업을 수행하여 시스템을 초기 상태로 복구할 수 있습니다.

- **구현 방법**: 보상 작업을 수행하는 논리가 필요하며, 보상 작업은 원래 작업의 반대 작업을 의미합니다. 트랜잭션이 실패하면 보상 트랜잭션을 실행하여 롤백을 시도합니다.

### 2. **피봇 트랜잭션 (Pivot Transaction)**
- **설명**: 피봇 트랜잭션은 **취소 불가능한 트랜잭션**입니다. 트랜잭션이 이 지점에 도달하면 되돌릴 수 없으며, 시스템은 이 트랜잭션이 성공하도록 모든 노력을 기울여야 합니다.
  
- **사용 시나리오**: 예를 들어, 온라인 결제 시스템에서 결제가 처리되면, 결제를 취소하는 것이 복잡하거나 불가능할 수 있습니다. 결제가 성공하면 이후의 모든 작업이 결제 성공을 기반으로 진행됩니다. 따라서 결제와 같은 트랜잭션이 피봇 트랜잭션이 됩니다.

- **구현 방법**: 피봇 트랜잭션이 성공하면 이후 작업은 그 트랜잭션이 성공한 상태를 전제로 진행됩니다. 실패 시, 시스템은 가능한 모든 방법을 동원해 피봇 트랜잭션이 성공하도록 해야 하며, 실패 시 복구 계획이 필요합니다.

### 3. **재시도 가능 트랜잭션 (Retryable Transaction)**
- **설명**: 재시도 가능 트랜잭션은 **일시적인 오류로 인해 실패했을 때 재시도할 수 있는 트랜잭션**입니다. 재시도가 실패해도 데이터 일관성이 유지되며, 시스템에 영향을 주지 않습니다.
  
- **사용 시나리오**: 예를 들어, 네트워크 오류로 인해 데이터베이스 업데이트가 실패한 경우, 이 트랜잭션은 재시도될 수 있습니다. 트랜잭션이 재시도되면서 일시적인 문제를 극복하고 성공할 가능성이 높습니다.

- **구현 방법**: 트랜잭션 실패 시, 일정 시간 간격을 두고 재시도 로직을 추가합니다. 재시도 횟수나 대기 시간을 설정하여 무한 재시도로 인한 시스템 오버헤드를 방지할 수 있습니다. 

### **요약**
- **보상 가능 트랜잭션**: 실패 시 보상 작업을 통해 시스템 상태를 되돌릴 수 있는 트랜잭션.
- **피봇 트랜잭션**: 되돌릴 수 없고, 성공을 보장해야 하는 중요한 트랜잭션.
- **재시도 가능 트랜잭션**: 일시적인 문제로 실패 시 재시도가 가능한 트랜잭션.

이 세 가지 트랜잭션 유형을 적절히 활용하면 시스템의 안정성과 복구 능력을 높일 수 있습니다. 시스템 설계 시, 각 트랜잭션의 특성에 따라 적절한 오류 처리 및 복구 전략을 적용하는 것이 중요합니다.
